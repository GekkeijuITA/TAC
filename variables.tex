\newcommand{\preamble}{
    \usepackage[italian]{babel}
    \usepackage{geometry}
    \usepackage{amsmath}
    \usepackage{amssymb}
    \usepackage{graphicx}
    \usepackage{ulem}
    \usepackage{amsthm}
    \usepackage{listings}
    \usepackage{xparse}
    \usepackage{expl3}
    \usepackage{tikz}
    \usepackage[colorlinks=true, linkcolor=blue]{hyperref}
    \usetikzlibrary{calc}
    \let\olditemize\itemize
    \renewcommand\itemize{\olditemize\setlength\itemsep{0em}}
    \geometry{a4paper, left=1cm, right=1cm, top=1cm, bottom=2cm}
    \usepackage[most]{tcolorbox}

    \newtcbtheorem[auto counter,number within=section]{definitionbox}{Definizione}{
        colback=blue!5!white,
        colframe=blue!75!black,
        fonttitle=\bfseries,
        boxsep=5pt,
        arc=5pt,
        boxrule=1pt,
        title={Definizione}
    }{def}

    \newtcbtheorem[auto counter,number within=section]{theorembox}{Teorema}{
        colback=red!5!white,
        colframe=red!75!black,
        fonttitle=\bfseries,
        boxsep=5pt,
        arc=5pt,
        boxrule=1pt,
        title={Teorema}
    }{thm}
    
    \tcbset{
        demonstration/.style={
            colback=magenta!5!white, 
            colframe=magenta!75!black,
            boxsep=5pt,
            arc=5pt,
            boxrule=1pt,
            title={\textbf{Dimostrazione}}
        }
    }
    
    \newenvironment{demonstration}[1][]{
        \begin{tcolorbox}[demonstration, ##1]
    }{
        \end{tcolorbox}
    }

    \tcbset{
        exercise/.style={
            colback=orange!5!white, 
            colframe=orange!75!black,
            boxsep=5pt,
            arc=5pt,
            boxrule=1pt,
            title={\textbf{Esercizio}}
        }
    }
    
    \newenvironment{exercise}[1][]{
        \begin{tcolorbox}[exercise, ##1]
    }{
        \end{tcolorbox}
    }

    \tcbset{
        example/.style={
            colback=gray!5!white, 
            colframe=gray!75!black,
            boxsep=5pt,
            arc=5pt,
            boxrule=1pt,
            title={\textbf{Esempio}}
        }
    }
    
    \newenvironment{example}[1][]{
        \begin{tcolorbox}[example, ##1]
    }{
        \end{tcolorbox}
    }
}